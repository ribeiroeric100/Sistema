# Ambiente
# Em produção (Render), prefira configurar variáveis no painel do Render (Environment)
# ao invés de enviar arquivo .env junto no deploy.
NODE_ENV=development

# Porta
# Local: pode fixar (ex.: 3001). Em Render: NÃO fixe, use o PORT que a plataforma injeta.
PORT=3001

# CORS (lista separada por vírgula)
# Em produção é OBRIGATÓRIO definir.
# Ex.: https://app.seudominio.com,https://admin.seudominio.com
CORS_ORIGIN=http://localhost:5173

# Segurança (OBRIGATÓRIO em produção)
# Gere com: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Dica: se o segredo tiver caracteres como #, envolva em aspas: JWT_SECRET="...#..."
JWT_SECRET=dev_jwt_secret_change_me

# Opcional: segredo separado para tokens de reset (se vazio, cai no JWT_SECRET)
RESET_TOKEN_SECRET=

# URL pública do frontend (usada para links de reset de senha)
APP_URL=http://localhost:5173

# Rate limit (opcional)
RATE_LIMIT_LOGIN_WINDOW_MS=900000
RATE_LIMIT_LOGIN_MAX=20
RATE_LIMIT_REGISTER_WINDOW_MS=900000
RATE_LIMIT_REGISTER_MAX=10
RATE_LIMIT_FORGOT_WINDOW_MS=900000
RATE_LIMIT_FORGOT_MAX=10
RATE_LIMIT_RESET_WINDOW_MS=900000
RATE_LIMIT_RESET_MAX=10

# SMTP (opcional) - para envio de reset de senha
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=

# Banco de dados
# Este backend usa Postgres via DATABASE_URL.
# Render: ao criar um Postgres, o Render injeta DATABASE_URL automaticamente no service.
# Exemplo (dev local):
# DATABASE_URL="postgresql://USER:PASSWORD@HOST:5432/DBNAME?sslmode=require"
# Importante: se a senha tiver caracteres especiais, faça URL-encode (ex.: # -> %23).

DATABASE_URL=

# (Recomendado no Supabase) URL separada só para migrations.
# Motivo: Transaction Pooler (PgBouncer) pode causar problemas com migrations/locks em alguns cenários.
# Use a "Direct connection" do Supabase aqui e deixe DATABASE_URL com o pooler para o app.
MIGRATIONS_DATABASE_URL=

# SSL do Postgres (opcional)
# Em produção (NODE_ENV=production) o backend já ativa SSL automaticamente.
# Se precisar forçar em dev/staging, use:
PGSSL=true

# ===== Template para Render (produção) =====
# Configure estes valores no Render (Environment Variables):
# NODE_ENV=production
# CORS_ORIGIN=https://odonto.pages.dev
# APP_URL=https://odonto.pages.dev
# JWT_SECRET="gere-um-segredo-forte"
# RESET_TOKEN_SECRET="opcional-outro-segredo"
# DATABASE_URL="postgresql://USER:PASSWORD@HOST:5432/DBNAME?sslmode=require"
